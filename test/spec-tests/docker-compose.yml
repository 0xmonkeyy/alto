version: "3.8"

services:
    alto:
        container_name: alto
        build: ../../
        ports: [ "3000:3000" ]
        command: --config config.localhost.json --rpcUrl http://geth:8545

        mem_limit: 300M
        logging:
            driver: "json-file"
            options:
                max-size: 10m
                max-file: "10"
        depends_on:
            geth-dev:
                condition: service_started

    fund-signer:
        image: ethereum/client-go:release-1.10
        entrypoint: 'geth --exec "eth.sendTransaction({from: eth.accounts[0], to: \"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\", value: web3.toWei(10000, \"ether\")})" attach http://geth-dev:8545'
        depends_on:
            geth-dev:
                condition: service_started

    geth-dev:
        container_name: geth
        build: geth-dev
        ports: [ "8545:8545" ]
